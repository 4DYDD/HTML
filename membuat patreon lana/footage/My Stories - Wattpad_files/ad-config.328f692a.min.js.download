var __adConfig=function(){function s(e){return e.split("-")[0]}function r(e,t){var n=_.get(wattpad,"testGroups.GDPR_ADS_EXPERIENCE",!1),a=_.get(wattpad,"testGroups.EXCLUDE_PREBID_PARTNERS",!1),i=wattpad&&wattpad.utils?wattpad.utils.getDeviceType():"",d=_.get(wattpad,"userCountryCode",""),r=function(e,t){var n=wattpad.utils.getIxPrebidSizes(t),a=[{gdprEnabled:!0,exclude:{},config:{bidder:"rubicon",params:{accountId:7941,siteId:346974,zoneId:t.rubiconZone}}},{gdprEnabled:!0,exclude:{desktop:["AE"],mobile:["SA"]},config:{bidder:"pubmatic",params:{publisherId:"159971",adSlot:t.pubmaticSlot?t.pubmaticSlot.toString():null}}},{gdprEnabled:!0,exclude:{desktop:["BR","IN","TR"]},config:{bidder:"criteo",params:{networkId:10933}}},{gdprEnabled:!0,exclude:{},config:{bidder:"triplelift",params:{inventoryCode:t.tripleliftInvCode}}},{gdprEnabled:!0,exclude:{desktop:["IN","AR","PL"],mobile:["PL","CL"]},config:{bidder:"openx",params:{unit:t.openXUnitId,delDomain:"wattpad-d.openx.net"}}},{gdprEnabled:!1,exclude:{desktop:["IN"],mobile:[]},config:{bidder:"sovrn",params:{tagid:t.sovrnTag?t.sovrnTag.toString():null}}},{gdprEnabled:!0,exclude:{},config:{bidder:"sharethrough",params:{pkey:t.sharethroughPKey}}}];return n.forEach(function(e){a.push({gdprEnabled:!1,exclude:{},config:e})}),a}(0,t),o={rubicon:["accountId","siteId","zoneId"],pubmatic:["publisherId","adSlot"],criteo:["networkId"],triplelift:["inventoryCode"],openx:["unit","delDomain"],sovrn:["tagid"],sharethrough:["pkey"],ix:["siteId","size"]};return r.reduce(function(e,t){return function(e){var t=e.config,n=!0;return o[t.bidder].forEach(function(e){t.params.hasOwnProperty(e)&&t.params[e]||(n=!1)}),n}(t)&&function(e){return!n||e.gdprEnabled}(t)&&!function(e){var t=e.exclude[i]||[];return a&&t.includes(d)}(t)&&function(e){return!e.onlyInCountry||e.onlyInCountry.includes(d)}(t)&&e.push(t.config),e},[])}var g,t=wattpad.adzerkHeaderBiddingUnitMap,o=function(e){if(t.hasOwnProperty(e))return t[e]},f=window.IntersectionObserver&&window.IntersectionObserverEntry&&window.IntersectionObserverEntry.prototype&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;f&&(g=new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(e.target.classList.contains("hasRun")||(e.target.classList.add("hasRun"),t.unobserve(e.target),m(e.target.getAttribute("id"))))})},{rootMargin:"0px 0px",root:null,threshold:0}));function e(e){if(null!==e.detail){var t,n,a,i=e.detail.shouldDelayAds,d=e.detail.shouldShowAds,r=e.detail.adsSkipReason,o=i||!d,s=e.detail.lazyLoadAd,u=document.getElementById(e.detail.adUnitId);if("undefined"!=typeof __atha&&!d)app&&app.currentView&&app.currentView.model&&(n=(t=app.currentView.model.attributes).group?t.group:t,a=t.group?t:void 0),__atha.sendSkip(e.detail.adUnitId,r,n,a);u?o?wattpad.utils.generateAndRenderHardcodedCreative(e.detail.adUnitId):s&&f&&!u.classList.contains("hasIO")?(u.classList.add("hasIO"),g.observe(u)):u.classList.contains("hasRun")?console.warn("auction already ran on adUnitId: "+e.detail.adUnitId):(u.classList.add("hasRun"),m(e.detail.adUnitId)):console.error("unable to find "+e.detail.adUnitId+" in the DOM")}else{var p=document.querySelectorAll(".advertisement:not(.hasRun):not(.hasIO):not(.outstream_video):not(.hc):not(.storylanding_top):not(.storylanding_bottom_mweb)");if(p.length)for(var c=0;c<p.length;c++){var l=p[c];f&&l.classList.contains("lazyAd")&&!l.classList.contains("hasIO")?(l.classList.add("hasIO"),g.observe(document.getElementById(l.id))):(l.classList.add("hasRun"),m(l.id))}}}var m=function(e){var t,n,a,i={placements:{}},d=s(e),r=wattpad.utils.getPlacementConfiguration(d);i.placements[e]={zoneId:r.zone,htSlotName:d},app&&app.currentView&&app.currentView.model&&(n=(t=app.currentView.model.attributes).group?t.group:t,a=t.group?t:void 0);var o={siteId:1025452,networkId:9660,adTypes:Object.keys(_.get(r,"sizes",{})).map(function(e){return parseInt(e,10)}),targeting:wattpad.utils.getAdzerkTargeting(n,a,wattpad.utils.currentUser().toJSON()||{})};_.merge(i.placements[e],o),wattpad.utils.loadHbAdPrebid(i)};return window.addEventListener("ad-available",e),{getPrebidAdUnits:function(e){var d=[];return e.forEach(function(e){var t=s(e),n=function(e){var t=o(e);return t?Object.values(t.sizes):[]}(t),a=o(t),i={code:e,mediaTypes:{banner:{sizes:n}},bids:r(0,a)};d.push(i)}),d},configurePrebid:function(e){if(e&&e.getEvents&&0===e.getEvents().length){var t=[{name:"criteo"},{name:"pubCommonId",storage:{type:"cookie",name:"_pubcid",expires:365}}];_.get(window,"wattpad.testGroups.USE_33ACROSS",!1)&&t.push({name:"33acrossId",params:{pid:"0015a0000341H3PAAU"},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}});var n=n||window.PWT||{};if(n&&n.getUserIds){var a=n.getUserIds();a.tdid&&t.push({name:"unifiedId",value:{tdid:a.tdid}})}e.onEvent("bidResponse",function(e){var t=wattpad.utils.normalizeBids([e],wattpad.utils.getBidFormat("prebid"))[0];if("undefined"!=typeof __atha){var n=__atha.sendBid(e.adUnitCode,_.get(t,"partner","unknown"),_.get(t,"bic",void 0),t.dimensions);e.id=n}});var i={consentManagement:{usp:{cmpApi:"iab",timeout:100}},userSync:{userIds:t,filterSettings:{iframe:{bidders:"*",filter:"include"}}}};_.get(window,"wattpad.testGroups.GDPR_ADS_EXPERIENCE",!1)&&(i.consentManagement.gdpr={cmpApi:"iab",timeout:8e3,defaultGdprScope:!0}),e.setConfig(i)}},getAdCommentFromPrebidBid:function(e){return wattpad.utils.sprintf("p:%s c:%s m:%s",[e.bidder,e.creativeId,JSON.stringify(e.meta)])}}}();"undefined"!=typeof module&&(module.exports=__adConfig);
//# sourceMappingURL=ad-config.328f692a.min.js.map
